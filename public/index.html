<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="author" content="Ken Gutierrez" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Selfie App</title>
    <!--Added a forward slash in front of the file to link to the html page.-->
    <link rel="stylesheet" type="text/css" href="/futurismo.css" />
  </head>
  <body>
    <main>
      <h1>Selfie App</h1>
      <h2>Where in the world am I!</h2>
      <h3 class="part1">Latitude: <span id="latitude"></span>&deg;</h3>
      <h3 class="part2">Longitude: <span id="longitude"></span>&deg;</h3>
      <div class="rect rect1">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect2">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect3">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect4">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect5">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect6">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect7">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <div class="rect rect8">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <rect width="100" height="100" fill="currentcolor" />
        </svg>
      </div>
      <!-- Attached JavaScript event handlers for an element. -->
      <div class="circle circle1">
        <svg
          id="geolocate"
          width="100%"
          height="100%"
          viewBox="0 0 50 50"
          preserveAspectRatio="none"
          xmlns:xlink=""
        >
          <circle cx="25" cy="25" r="25" fill="currentcolor" class="pointer" />
          <text
            fill="#ffffff"
            font-size="12"
            font-family="Verdana"
            x="2"
            y="25"
          >
            <tspan x="8" y="25">Click</tspan>
            <tspan x="8" y="35">Me</tspan>
          </text>
        </svg>
      </div>
      <div class="circle circle2">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 50 50"
          preserveAspectRatio="none"
        >
          <circle cx="25" cy="25" r="25" fill="currentcolor" />
        </svg>
        <!--<button id="geolocate">Geolocate</button>-->
      </div>
    </main>
    <script>
      console.log('Here There Be Dragons');
      // Obtain current user position in lat and long coords.
      document.getElementById('geolocate').addEventListener('click', event => {
        if ('geolocation' in navigator) {
          console.log('Geolocation available.');
          navigator.geolocation.getCurrentPosition(async position => {
            const lat = position.coords.latitude;
            const long = position.coords.longitude;
            document.getElementById('latitude').textContent = lat;
            document.getElementById('longitude').textContent = long;

            // Create a coordinate data js object.
            const coordData = { lat, long };
            // Package the js object as a POST.
            const options = {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
                // 'Content-Type': 'application/x-www-form-urlencoded',
              },
              body: JSON.stringify(coordData) // body data type must match "Content-Type" header
            };
            // Send the package to my end point.
            const response = await fetch('/api', options);
            const data = await response.json();
            console.log(data);
            console.log(position); // Logs all current user position information.
          });
        } else {
          console.log('Geolocation NOT available.');
        }
      });
    </script>
  </body>
</html>
